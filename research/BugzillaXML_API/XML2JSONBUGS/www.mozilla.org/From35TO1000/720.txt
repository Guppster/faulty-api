{"bugs":[{"creation_time":"Wed Jul 29 14:00:00 EEST 1998","keywords":[],"is_cc_accessible":true,"flags":[],"whiteboard":"","see_also":[],"resolution":"FIXED","platform":"x86","cf_fx_points":"---","cf_fx_iteration":"---","id":720,"assigned_to":"harishd@formerly-netscape.com.tld","cc":["peterl-retired@formerly-netscape.com.tld"],"summary":"Font size rounding bug","severity":"normal","creator":"harishd@formerly-netscape.com.tld","product":"MozillaClassic","depends_on":[],"is_open":false,"blocks":[],"is_confirmed":true,"cf_qa_whiteboard":"","groups":[],"assigned_to_detail":{"name":"harishd@formerly-netscape.com.tld","real_name":"harishd","id":3848,"email":"harishd@formerly-netscape.com.tld"},"creator_detail":{"name":"harishd@formerly-netscape.com.tld","real_name":"harishd","id":3848,"email":"harishd@formerly-netscape.com.tld"},"priority":"P1","classification":"Graveyard","cf_last_resolved":"Thu Feb 11 20:01:08 EET 1999","version":"other","url":"","qa_contact":"rubydoo123@aol.com","op_sys":"Windows NT","last_change_time":"Wed Apr 21 18:23:14 EEST 1999","target_milestone":"M4","component":"FontLib","is_creator_accessible":true,"cc_detail":[{"name":"peterl-retired@formerly-netscape.com.tld","real_name":"Peter Linss","id":3826,"email":"peterl-retired@formerly-netscape.com.tld"}],"mentors":[],"mentors_detail":[],"cf_user_story":"","qa_contact_detail":{"name":"rubydoo123@aol.com","real_name":"","id":3849,"email":"rubydoo123@aol.com"},"status":"VERIFIED"}],"comments":[{"is_private":false,"creation_time":"Wed Jul 29 14:00:00 EEST 1998","creator":"harishd@formerly-netscape.com.tld","author":"harishd@formerly-netscape.com.tld","time":"Wed Jul 29 14:00:00 EEST 1998","text":"Peter Linss wrote:  In working to make NGLayout's font handling match that of Nav's, I've uncovered a rounding error in the Win libfont code:  modules/libfont/producers/win/src/winfp.cpp: line 875  // for passing to Windows, convert pointsize to pixel size and negative.  if( pointSize > 0 )   pixelSize = (int) - pointSize * pPrmFont->YPixelPerInch / 72.0;  pointSize is the input size (a double), the rounding error is introduced in the conversion to pixel size. The problem is a classic lack of parentheses, the int conversion is happening before the divide by 72.0. To do what was meant, the line should read:   pixelSize = (int) - ((pointSize * pPrmFont->YPixelPerInch) / 72.0); However, this is also wrong. The proper (ie: Windows) way is to round to the rearest integer, not the smallest. According to the Windows docs the code should read:   pixelSize = - MulDiv((int)pointSize, pPrmFont->YPixelPerInch, 72); That would give the correct rounding.  This bug results in Nav being unable to render certain font sizes, ie: 8 point text comes out significantly smaller (more like 7 point).  For more information about the way it looks checkout the above URL.","id":2517,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Thu Jul 30 20:32:59 EEST 1998","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","time":"Thu Jul 30 20:32:59 EEST 1998","text":"dp, since this may require a code review to verify the fix, who would be the appropriate engineer to look at the code.","id":2518,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Thu Jul 30 20:57:59 EEST 1998","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","time":"Thu Jul 30 20:57:59 EEST 1998","text":"assigning Fenella as QA Assigned to","id":2519,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Sat Aug 01 01:33:59 EEST 1998","creator":"chofmann@gmail.com","author":"chofmann@gmail.com","time":"Sat Aug 01 01:33:59 EEST 1998","text":"tell me if this is a regression from 4.05...","id":2520,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Sun Aug 02 08:44:59 EEST 1998","creator":"dp@formerly-netscape.com.tld","author":"dp@formerly-netscape.com.tld","time":"Sun Aug 02 08:44:59 EEST 1998","text":"This isn't a regression. We are still evaluating whether we need to fix it ASAP. Data is pretty convoluted betn. 3.0,4.0,IE4.0,IE5.0 and word.  We should revisit this for 4.5","id":2521,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Sat Aug 08 02:46:59 EEST 1998","creator":"leger@formerly-netscape.com.tld","author":"leger@formerly-netscape.com.tld","time":"Sat Aug 08 02:46:59 EEST 1998","text":"Putting on b2 radar.  Changing from P0 to P1.","id":2522,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Tue Aug 25 20:21:59 EEST 1998","creator":"mourey@formerly-netscape.com.tld","author":"mourey@formerly-netscape.com.tld","time":"Tue Aug 25 20:21:59 EEST 1998","text":"This is not a regression nor a crash, nor data loss, nor an escalation, therefore this bug doesn't meet the 4.5 criteria (http://webgroup/novabugs.html).  Marking TFV 5.0.","id":2523,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Wed Feb 03 16:07:59 EET 1999","creator":"leger@formerly-netscape.com.tld","author":"leger@formerly-netscape.com.tld","time":"Wed Feb 03 16:07:59 EET 1999","text":"Setting all current Open/Normal to M4.","id":2524,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Thu Feb 11 22:53:59 EET 1999","creator":"leger@formerly-netscape.com.tld","author":"leger@formerly-netscape.com.tld","time":"Thu Feb 11 22:53:59 EET 1999","text":"Old bug.  beppe, couldyou assign QA to Verify this one please.","id":2525,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Tue Feb 16 18:14:59 EET 1999","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","time":"Tue Feb 16 18:14:59 EET 1999","text":"asking dp who is the best person to review this within fontlib.","id":2526,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Fri Mar 05 19:09:59 EET 1999","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","time":"Fri Mar 05 19:09:59 EET 1999","text":"I talked with Harish about how we could verify this bug and there really isn't any way that we can do this visually. This would really need to be done through assessing what the code pushes out. Maybe Peter Linss has a suggestion on how to  verify this.","id":2527,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Fri Mar 05 19:09:59 EET 1999","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","time":"Fri Mar 05 19:09:59 EET 1999","text":"I talked with Harish about how we could verify this bug and there really isn't any way that we can do this visually. This would really need to be done through assessing what the code pushes out. Maybe Peter Linss has a suggestion on how to  verify this.","id":2528,"bug_id":720,"tags":[]},{"is_private":false,"creation_time":"Fri Mar 12 16:28:59 EET 1999","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","time":"Fri Mar 12 16:28:59 EET 1999","text":"per Peters assessment, marking this as verified","id":2529,"bug_id":720,"tags":[]}]}
