{"bugs":[{"creation_time":"Thu May 28 07:00:00 EEST 1998","keywords":[],"is_cc_accessible":true,"flags":[],"whiteboard":"","see_also":[],"resolution":"FIXED","platform":"x86","cf_fx_points":"---","cf_fx_iteration":"---","id":413,"assigned_to":"nobody@mozilla.org","cc":[],"summary":"history.go(0) emptys hidden fields","severity":"major","creator":"nobody@mozilla.org","product":"MozillaClassic","depends_on":[],"is_open":false,"blocks":[],"is_confirmed":true,"cf_qa_whiteboard":"","groups":[],"assigned_to_detail":{"name":"nobody@mozilla.org","real_name":"Nobody; OK to take it and work on it","id":1,"email":"nobody@mozilla.org"},"creator_detail":{"name":"nobody@mozilla.org","real_name":"Nobody; OK to take it and work on it","id":1,"email":"nobody@mozilla.org"},"priority":"P2","classification":"Graveyard","cf_last_resolved":"Fri Dec 01 11:31:46 EET 2000","version":"1998-03-31","url":"","qa_contact":"","op_sys":"Windows NT","last_change_time":"Mon Jan 13 01:42:26 EET 2003","target_milestone":"---","component":"Layout","is_creator_accessible":true,"cc_detail":[],"mentors":[],"mentors_detail":[],"cf_user_story":"","status":"VERIFIED"}],"comments":[{"is_private":false,"creation_time":"Thu May 28 07:00:00 EEST 1998","creator":"nobody@mozilla.org","author":"nobody@mozilla.org","time":"Thu May 28 07:00:00 EEST 1998","text":"Hidden fields are emptied by a call to history.go(0). Text field are not.. Users expect the behavior of hidden field to be the same as text field (execpt they are hidden) To reproduce: 1/ Enter a value in Text field source for \"non-hidden\" example 2/ Click transfer 3/ Click run 'history.go(0)'  - the value is still here 1/ Enter a value in Text field source for \"hidden\" example 2/ Click transfer 3/ Click read to see the value in the hidden field 4/ Click run 'history.go(0)' 5/ Click read - The alert is empty.. the value is lost ------- Additional Comments From ludovic  04/08/98 12:21 ------- I love this free source thing.. I've debugged Mozilla and have a patch to propose.. Check http://champagne.mcom.com/dev/bugs/16/bug.html for the modified files... * * Differences to liblayout to not loose * the Client-JS modified hidden form values * when doing history.go(0) (Bug 113155) * * Disclaimer: I have no idea if these modification will break * or not other parts of the layout/js engine. In function void lo_CleanFormElementData(LO_FormElementData *element_data) layfree.c:240d239 <               case FORM_TYPE_HIDDEN: layfree.c:258a258,271 >               case FORM_TYPE_HIDDEN: >                       { >                               lo_FormElementMinimalData *form_data; > >                               form_data = (lo_FormElementMinimalData *) >                                               element_data; >                               if (form_data->name != NULL) >                               { >                                       PA_FREE(form_data->name); >                                       form_data->name = NULL; >                               } >                       } >                       break; > In function static LO_FormElementStruct * lo_form_input_minimal(MWContext *context, lo_DocState *state,         PA_Tag *tag, int32 type) layform.c:1276c1276,1278 <       form_data->value = lo_FetchParamValue(context, tag, PARAM_VALUE); --- >       if (form_data->type != FORM_TYPE_HIDDEN) >        form_data->value = lo_FetchParamValue(context, tag, PARAM_VALUE); > ------- Additional Comments From ludovic  04/09/98 02:57 ------- oops.. The default value of the Hidden field is lost in the first layout with the modifications I did. This modification should be better @@ -1236,8 +1236,6 @@         if (form_data->type == FORM_TYPE_NONE)         {                 form_data->FE_Data = NULL; -               if (type==FORM_TYPE_HIDDEN) -         form_data->value = lo_FetchParamValue(context, tag, PARAM_VALUE);         }","id":993,"bug_id":413,"tags":[]},{"is_private":false,"creation_time":"Thu May 28 14:13:59 EEST 1998","creator":"nisheeth_mozilla@yahoo.com","author":"nisheeth_mozilla@yahoo.com","time":"Thu May 28 14:13:59 EEST 1998","text":"The fix that Ludovic proposed is in the tree.  Thanks a lot, Ludovic.","id":994,"bug_id":413,"tags":[]},{"is_private":false,"creation_time":"Tue Jul 28 22:52:59 EEST 1998","creator":"glynn@formerly-netscape.com.tld","author":"glynn@formerly-netscape.com.tld","time":"Tue Jul 28 22:52:59 EEST 1998","text":"qa assigned set to ernie","id":995,"bug_id":413,"tags":[]},{"is_private":false,"creation_time":"Fri Dec 01 11:31:30 EET 2000","creator":"jruderman@gmail.com","author":"jruderman@gmail.com","time":"Fri Dec 01 11:31:30 EET 2000","text":"reopen to actually resolve as fixed","id":524738,"bug_id":413,"tags":[]},{"is_private":false,"creation_time":"Fri Dec 01 11:31:46 EET 2000","creator":"jruderman@gmail.com","author":"jruderman@gmail.com","time":"Fri Dec 01 11:31:46 EET 2000","text":"marking fixed.","id":524739,"bug_id":413,"tags":[]},{"is_private":false,"creation_time":"Mon Jan 13 01:42:26 EET 2003","creator":"brant@gurganus.name","author":"brant@gurganus.name","time":"Mon Jan 13 01:42:26 EET 2003","text":"VERIFIED due to no changes in over a year","id":1707254,"bug_id":413,"tags":[]}]}
