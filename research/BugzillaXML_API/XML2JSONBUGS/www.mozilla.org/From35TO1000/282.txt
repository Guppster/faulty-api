{"bugs":[{"creation_time":"Wed Apr 29 21:07:31 EEST 1998","keywords":[],"is_cc_accessible":true,"flags":[],"whiteboard":"","see_also":[],"resolution":"WONTFIX","platform":"Sun","cf_fx_points":"---","cf_fx_iteration":"---","id":282,"assigned_to":"mcafee@gmail.com","cc":[],"summary":"XFE overrides color preferences after viewing frames","severity":"minor","creator":"ksw@dna.lth.se","product":"MozillaClassic","depends_on":[],"is_open":false,"blocks":[],"is_confirmed":true,"cf_qa_whiteboard":"","groups":[],"assigned_to_detail":{"name":"mcafee@gmail.com","real_name":"Chris McAfee","id":1672,"email":"mcafee@gmail.com"},"creator_detail":{"name":"ksw@dna.lth.se","real_name":"","id":2390,"email":"ksw@dna.lth.se"},"priority":"P3","classification":"Graveyard","cf_last_resolved":"Tue Jan 05 19:30:02 EET 1999","version":"1998-04-08","url":"","qa_contact":"","op_sys":"Solaris","last_change_time":"Wed Apr 21 18:23:13 EEST 1999","target_milestone":"---","component":"XFE","is_creator_accessible":true,"cc_detail":[],"mentors":[],"mentors_detail":[],"cf_user_story":"","status":"VERIFIED"}],"comments":[{"is_private":false,"creation_time":"Wed Apr 29 21:07:31 EEST 1998","creator":"ksw@dna.lth.se","author":"ksw@dna.lth.se","time":"Wed Apr 29 21:07:31 EEST 1998","text":"Created by   (ksw@dna.lth.se) on Wednesday, April 29, 1998 7:07:31 AM PDT Additional Details : All X Windows versions have a bug in the front end in which the user preferences for colors are permanently overridden after having viewed certain frames.  Upon displaying a frame the code attempts to set the _default_ colors, instead of those of the document.  Patch available.","id":635,"bug_id":282,"tags":[]},{"is_private":false,"creation_time":"Sun Aug 30 10:50:59 EEST 1998","creator":"mcafee@gmail.com","author":"mcafee@gmail.com","time":"Sun Aug 30 10:50:59 EEST 1998","text":"Please send me your patch if you still have it: mcafee@netscape.com, maybe you've gotten this checked in by now?","id":636,"bug_id":282,"tags":[]},{"is_private":false,"creation_time":"Tue Sep 29 06:08:59 EEST 1998","creator":"mcafee@gmail.com","author":"mcafee@gmail.com","time":"Tue Sep 29 06:08:59 EEST 1998","text":"Can't fix w/o a patch, or need more info.","id":637,"bug_id":282,"tags":[]},{"is_private":false,"creation_time":"Thu Oct 01 07:28:59 EEST 1998","creator":"mcafee@gmail.com","author":"mcafee@gmail.com","time":"Thu Oct 01 07:28:59 EEST 1998","text":"Here's the patch which you asked for.  The basic idea is that the xfe was (since netscape 2.0) making the document's background colors the default colors.  Two things needed to be changed:    LO_SetDefaultColor -->  LO_SetDocumentColor,  and then someone needed to actually install the user's prefences from preferences.js as the default - this was being done simply because it was happening for _every_ document.  Index: xfe.c =================================================================== RCS file: /cvsroot/mozilla/cmd/xfe/xfe.c,v retrieving revision 3.8 diff -r3.8 xfe.c 2024a2025,2029 >     LO_Color *linkcolor = XP_NEW( LO_Color ); >     LO_Color *vlinkcolor = XP_NEW( LO_Color ); >     LO_Color *alinkcolor = XP_NEW( LO_Color ); >     LO_Color *fgcolor = XP_NEW( LO_Color ); >     LO_Color *bgcolor = XP_NEW( LO_Color ); 2025a2031 > 2034,2043c2040,2065 <     LO_SetDefaultColor (LO_COLOR_LINK, <                       c[0].red >> 8, c[0].green >> 8, c[0].blue >> 8); <     LO_SetDefaultColor (LO_COLOR_VLINK, <                       c[1].red >> 8, c[1].green >> 8, c[1].blue >> 8); <     LO_SetDefaultColor (LO_COLOR_ALINK, <                       c[2].red >> 8, c[2].green >> 8, c[2].blue >> 8); <     LO_SetDefaultColor (LO_COLOR_FG, <                       c[3].red >> 8, c[3].green >> 8, c[3].blue >> 8); <     LO_SetDefaultColor (LO_COLOR_BG, <                       c[4].red >> 8, c[4].green >> 8, c[4].blue >> 8); --- > >     linkcolor->red = c[0].red >> 8; >     linkcolor->green = c[0].green >> 8; >     linkcolor->blue = c[0].blue >> 8; > >     vlinkcolor->red = c[1].red >> 8; >     vlinkcolor->green = c[1].green >> 8; >     vlinkcolor->blue = c[1].blue >> 8; > >     alinkcolor->red = c[2].red >> 8; >     alinkcolor->green = c[2].green >> 8; >     alinkcolor->blue = c[2].blue >> 8; > >     fgcolor->red = c[3].red >> 8; >     fgcolor->green = c[3].green >> 8; >     fgcolor->blue = c[3].blue >> 8; > >     bgcolor->red = c[4].red >> 8; >     bgcolor->green = c[4].green >> 8; >     bgcolor->blue = c[4].blue >> 8; > >     LO_SetDocumentColor (context, LO_COLOR_LINK, linkcolor); >     LO_SetDocumentColor (context, LO_COLOR_VLINK, vlinkcolor); >     LO_SetDocumentColor (context, LO_COLOR_ALINK, alinkcolor); >     LO_SetDocumentColor (context, LO_COLOR_FG, fgcolor); >     LO_SetDocumentColor (context, LO_COLOR_BG, bgcolor);   Index: pref.cpp =================================================================== RCS file: /cvsroot/mozilla/cmd/xfe/src/pref.cpp,v retrieving revision 3.3 diff -r3.3 pref.cpp 56a57,69 > >     LO_SetDefaultColor( LO_COLOR_LINK, fe_globalPrefs.links_color.red, >                                        fe_globalPrefs.links_color.green, >                                        fe_globalPrefs.links_color.blue ); >     LO_SetDefaultColor( LO_COLOR_VLINK, fe_globalPrefs.vlinks_color.red, >                                         fe_globalPrefs.vlinks_color.green, >                                         fe_globalPrefs.vlinks_color.blue ); >     LO_SetDefaultColor( LO_COLOR_FG, fe_globalPrefs.text_color.red, >                                      fe_globalPrefs.text_color.green, >                                      fe_globalPrefs.text_color.blue ); >     LO_SetDefaultColor( LO_COLOR_BG, fe_globalPrefs.background_color.red, >                                      fe_globalPrefs.background_color.green, >                                      fe_globalPrefs.background_color.blue );","id":638,"bug_id":282,"tags":[]},{"is_private":false,"creation_time":"Wed Oct 14 18:18:59 EEST 1998","creator":"lennox@cs.columbia.edu","author":"lennox@cs.columbia.edu","time":"Wed Oct 14 18:18:59 EEST 1998","text":"*** Bug 1082 has been marked as a duplicate of this bug. ***","id":639,"bug_id":282,"tags":[]},{"is_private":false,"creation_time":"Tue Jan 05 19:30:59 EET 1999","creator":"mcafee@gmail.com","author":"mcafee@gmail.com","time":"Tue Jan 05 19:30:59 EET 1999","text":"xfe is gone in the new world.","id":640,"bug_id":282,"tags":[]},{"is_private":false,"creation_time":"Fri Feb 26 23:08:59 EET 1999","creator":"leger@formerly-netscape.com.tld","author":"leger@formerly-netscape.com.tld","time":"Fri Feb 26 23:08:59 EET 1999","text":"Marking Verified/Won't Fix","id":641,"bug_id":282,"tags":[]}]}
