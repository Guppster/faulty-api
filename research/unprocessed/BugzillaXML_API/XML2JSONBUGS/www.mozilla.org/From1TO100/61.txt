{"bugs":[{"comment_count":5,"creation_time":"Tue Apr 07 18:56:14 EDT 1998","keywords":[],"is_cc_accessible":true,"flags":[],"whiteboard":"","see_also":[],"resolution":"FIXED","platform":"x86","cf_fx_points":"---","cf_fx_iteration":"---","id":61,"assigned_to":"danm.moz@gmail.com","cc":[],"summary":"Navigator shutdown set-zero-context bug","severity":"minor","creator":"donwulff@iki.fi","product":"MozillaClassic","depends_on":[],"is_open":false,"blocks":[],"is_confirmed":true,"cf_qa_whiteboard":"","groups":[],"assigned_to_detail":{"name":"danm.moz@gmail.com","real_name":"Dan M","id":3795,"email":"danm.moz@gmail.com"},"creator_detail":{"name":"donwulff@iki.fi","real_name":"Jukka Santala","id":261,"email":"donwulff@iki.fi"},"priority":"P3","classification":"Graveyard","cf_last_resolved":"Thu Oct 15 23:57:53 EDT 1998","version":"1998-03-31","url":"","qa_contact":"rubydoo123@aol.com","op_sys":"Windows NT","last_change_time":"Tue Nov 07 18:41:58 EST 2000","target_milestone":"---","component":"Windows FE","is_creator_accessible":true,"cc_detail":[],"mentors":[],"mentors_detail":[],"cf_user_story":"","votes":0,"qa_contact_detail":{"name":"rubydoo123@aol.com","real_name":"","id":3849,"email":"rubydoo123@aol.com"},"status":"VERIFIED"}],"comments":[{"is_private":false,"creation_time":"Tue Apr 07 18:56:14 EDT 1998","creator":"donwulff@iki.fi","author":"donwulff@iki.fi","count":0,"time":"Tue Apr 07 18:56:14 EDT 1998","text":"Created by Jukka Santala (donwulff@iki.fi) on Tuesday, April 7, 1998 4:56:14 AM PDT\nAdditional Details :\nThe call stack backtrace tells more than a thousand words :\n(It''s an assert instead of prot. fault because this has\nthe below patch compiled in; it doesn''t affect the actual\nbug, just lets me recover from the error gracefully)\n\nXP_AssertAtLine(char * 0x00866778, int 63) line 2649\nCFormButton::SetContext(CAbstractCX * 0x00000000) line 63 +\n36 bytes\nCFormElement::GetFormElement(CAbstractCX * 0x00000000,\nLO_FormElementData_struct * 0x00a5c8c0) line 135\nFE_FreeFormElement(MWContext_ * 0x009ebd30,\nLO_FormElementData_struct * 0x00a5c8c0) line 720 + 11 bytes\nlo_FreeDocumentFormListData(MWContext_ * 0x009ebd30,\nlo_SavedFormListData_struct * 0x00a2d5e0) line 858 + 19\nbytes\nLO_FreeDocumentFormListData(MWContext_ * 0x009ebd30, void *\n0x00a2d5e0) line 6387 + 13 bytes\nSHIST_FreeHistoryEntry(MWContext_ * 0x009ebd30,\n_History_entry * 0x00a29c30) line 101 + 16 bytes\nSHIST_EndSession(MWContext_ * 0x009ebd30) line 438 + 13\nbytes\nCAbstractCX::DestroyContext() line 116 + 740 bytes\nCDCCX::DestroyContext() line 186\nCPaneCX::DestroyContext() line 304\nCWinCX::DestroyContext() line 619\nCGenericView::FrameClosing() line 215\nCMainFrame::OnClose() line 660\nCWnd::OnWndMsg(unsigned int 16, unsigned int 0, long 0, long\n* 0x0012fd3c) line 1815\nCWnd::WindowProc(unsigned int 16, unsigned int 0, long 0)\nline 1575 + 30 bytes\nAfxCallWndProc(CWnd * 0x00399ff0 {CMainFrame\nhWnd=0x0009035a}, HWND__ * 0x0009035a, unsigned int 16,\nunsigned int 0, long 0) line 217 + 26 bytes\nAfxWndProc(HWND__ * 0x0009035a, unsigned int 16, unsigned\nint 0, long 0) line 371\nAfxWndProcBase(HWND__ * 0x0009035a, unsigned int 16,\nunsigned int 0, long 0) line 203 + 21 bytes\nUSER32! 77e72cc4()\nUSER32! 77e72ce2()\nCNetscapeStatusBar::CParentSubclass::ParentSubclassProc(HWND\n__ * 0x0009035a, unsigned int 16, unsigned int 0, long 0)\nline 1077 + 29 bytes\nUSER32! 77e713ed()\n\nTemporary patch (Munched by the form):\n\ndiff --unified --recursive mozorg/ns/cmd/winfe/fmbutton.cpp\nmozilla/ns/cmd/winfe/fmbutton.cpp\n--- mozorg/ns/cmd/winfe/fmbutton.cpp\tMon Mar 30 17:57:41\n1998\n+++ mozilla/ns/cmd/winfe/fmbutton.cpp\tMon Apr 06 18:42:09\n1998\n@@ -60,8 +60,9 @@\n //\tCall the base.\n CFormElement::SetContext(pCX);\n\n+\tXP_ASSERT(pCX);\n //Update the widget if present for correct callbacks.\n-\tif(m_pWidget)\t{\n+\tif(m_pWidget&&pCX)\t{\n \tm_pWidget->RegisterContext(pCX->GetContext());\n \t}\n }\n\nThis will solve the immediate problem, but as to how and\nwhy pCX gets to be null is another story.","id":28,"bug_id":61,"tags":[]},{"is_private":false,"creation_time":"Fri Oct 09 15:44:59 EDT 1998","creator":"blythe@formerly-netscape.com.tld","author":"blythe@formerly-netscape.com.tld","count":1,"time":"Fri Oct 09 15:44:59 EDT 1998","text":"It gets NULL I'm guessing because earlier in the stack it is being deleted.\n\nHanding over to forms expert to evaluate the patch.  I think it's good.","id":29,"bug_id":61,"tags":[]},{"is_private":false,"creation_time":"Thu Oct 15 23:57:59 EDT 1998","creator":"danm.moz@gmail.com","author":"danm.moz@gmail.com","count":2,"time":"Thu Oct 15 23:57:59 EDT 1998","text":"The context is zero because someone higher up the call stack didn't want to\nhave to be bothered by no stinking contexts, so it sent in a zero.  donwulff's\npatch is fine under the circumstances, but I'm going to skip it because\nlaw@netscape.com already patched it one call higher up -- in GetFormElement, on\n16 July 98.  I say \"already\": Jukka saw this problem three months earlier.\nSorry about the delay.  I plead distraction; we plan to be more responsive in\nthe future.","id":30,"bug_id":61,"tags":[]},{"is_private":false,"creation_time":"Mon Feb 01 21:30:59 EST 1999","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","count":3,"time":"Mon Feb 01 21:30:59 EST 1999","text":"fixed on old codebase -- marking verified","id":31,"bug_id":61,"tags":[]},{"is_private":false,"creation_time":"Tue Nov 07 18:41:58 EST 2000","creator":"dhuang@studiodirect.com","author":"dhuang@studiodirect.com","count":4,"time":"Tue Nov 07 18:41:58 EST 2000","text":"width of field QU_CONTENT_OID is too small in table SD_QUOTE_DETAIL","id":506097,"bug_id":61,"tags":[]}]}
