{"bugs":[{"comment_count":6,"creation_time":"Tue Apr 07 19:08:08 EDT 1998","keywords":[],"is_cc_accessible":true,"flags":[],"whiteboard":"","see_also":[],"resolution":"FIXED","platform":"x86","cf_fx_points":"---","cf_fx_iteration":"---","id":62,"assigned_to":"brade@comcast.net","cc":[],"summary":"Composer ROWSPAN problem","severity":"major","creator":"donwulff@iki.fi","product":"MozillaClassic","depends_on":[],"is_open":false,"blocks":[],"is_confirmed":true,"cf_qa_whiteboard":"","groups":[],"assigned_to_detail":{"name":"brade@comcast.net","real_name":"Kathleen :Brade","id":1678,"email":"brade@comcast.net"},"creator_detail":{"name":"donwulff@iki.fi","real_name":"Jukka Santala","id":261,"email":"donwulff@iki.fi"},"priority":"P1","classification":"Graveyard","cf_last_resolved":"Wed Sep 23 20:02:07 EDT 1998","version":"1998-03-31","url":"","qa_contact":"","op_sys":"Windows NT","last_change_time":"Wed Apr 05 17:23:26 EDT 2000","target_milestone":"M12","component":"Composer","is_creator_accessible":true,"cc_detail":[],"mentors":[],"mentors_detail":[],"cf_user_story":"","votes":0,"status":"VERIFIED"}],"comments":[{"is_private":false,"creation_time":"Tue Apr 07 19:08:08 EDT 1998","creator":"donwulff@iki.fi","author":"donwulff@iki.fi","count":0,"time":"Tue Apr 07 19:08:08 EDT 1998","text":"Created by Jukka Santala (donwulff@iki.fi) on Tuesday, April 7, 1998 5:08:08 AM PDT\nAdditional Details :\nSometimes when the ROWSPAN attribute in a table has been\nset past the number of rows in a table, Composer will end\nup with memory corruption. This is due to a function using\nthe number of rows to initialize an array.\n\nIn particular, the following HTML code will demonstrate:\n\n<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH=\"100%\">\n<TR><TD BGCOLOR=\"#000000\" VALIGN=TOP ROWSPAN=2>\n    <IMG SRC=\"images/mozilla-banner.jpg\"\n    ALT=\"\" BORDER=0 USEMAP=\"#banner\"\n    WIDTH=600 HEIGHT=50 VSPACE=0 HSPACE=0>\n<\/TD><\/TR><\/TABLE>\n\nFrom a netscape rep. suggested to use a re-sizable array.\nFrom personal view over the code, it seems that the extra\narray positions arne''t actually needed since the spanned\nrows don''t get visible, though, so ending the loop once\nthe existing rows have been processed is another\npossibility. It''s also within possibility that the row\ncounter method needs fixing; need to dig deeper into the\ncode.\n\nThe following patch solved the problem for debugging:\n\ndiff --unified --recursive mozorg/ns/lib/layout/edtbuf.cpp\nmozilla/ns/lib/layout/edtbuf.cpp\n--- mozorg/ns/lib/layout/edtbuf.cpp\tMon Mar 30 17:55:37\n1998\n+++ mozilla/ns/lib/layout/edtbuf.cpp\tSat Apr 04 21:35:37\n1998\n@@ -1860,8 +1860,11 @@\n                         //  then it\nwill cause extra columns in following row(s)\n                         if( iRowSpan > 1 )\n                         {\n-                            for( intn j = 1; j < iRowSpan;\nj++ )\n-                                ExtraColumns[iRow+j] +=\niColSpan;\n+                            for( intn j = 1; j < iRowSpan;\nj++ ) {\n+\nif((iRow+j)>=iRows) XP_TRACE((\"CEditBuffer::FixupTableData()\ninconsistency!\"));\n+\nelse ExtraColumns[iRow+j] += iColSpan;\n+\nXP_TRACE((\"Did stuff\"));\n+\t\t\t\t\t\t\t}\n                         }\n                         //  Save actual location and size\ndata\n                         EDT_TableCellData *pCellData =\npEdCell->GetData();\n\nThis patch is incomplete, as it doesn''t deal with the\nside-effects of the loop which may do other nasty stuff,\nhowever it''s useful in debugging the problem for me.\nUpdated by   (brade@netscape.com) on Thursday, April 16, 1998 8:52:10 PM PDT\nAdditional Details :\nReassign bug to myself since I'm the owner of this file.\nI'm guessing that this is really cross-platform (ALL) but I haven't tested it on\nany platform to confirm yet.","id":32,"bug_id":62,"tags":[]},{"is_private":false,"creation_time":"Mon Feb 01 20:21:59 EST 1999","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","count":1,"time":"Mon Feb 01 20:21:59 EST 1999","text":"Greg, please have someone verify this -- thanks","id":33,"bug_id":62,"tags":[]},{"is_private":false,"creation_time":"Wed Feb 03 23:03:59 EST 1999","creator":"glynn@formerly-netscape.com.tld","author":"glynn@formerly-netscape.com.tld","count":2,"time":"Wed Feb 03 23:03:59 EST 1999","text":"eli set as qa contact, eli can you verify this asap?","id":34,"bug_id":62,"tags":[]},{"is_private":false,"creation_time":"Wed Feb 03 23:50:59 EST 1999","creator":"elig@formerly-netscape.com.tld","author":"elig@formerly-netscape.com.tld","count":3,"time":"Wed Feb 03 23:50:59 EST 1999","text":"Verify against what? We don't have a composer 5.0 right now.","id":35,"bug_id":62,"tags":[]},{"is_private":false,"creation_time":"Wed Feb 10 04:39:59 EST 1999","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","count":4,"time":"Wed Feb 10 04:39:59 EST 1999","text":"old code base -- marking as verified","id":36,"bug_id":62,"tags":[]},{"is_private":false,"creation_time":"Wed Apr 05 17:23:26 EDT 2000","creator":"rubydoo123@aol.com","author":"rubydoo123@aol.com","count":5,"time":"Wed Apr 05 17:23:26 EDT 2000","text":"setting to an approximate milestone so it can be off of the no TFV list","id":252582,"bug_id":62,"tags":[]}]}
