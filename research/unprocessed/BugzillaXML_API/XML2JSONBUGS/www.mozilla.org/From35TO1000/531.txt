{"bugs":[{"creation_time":"Mon Aug 17 02:12:23 EEST 1998","keywords":[],"is_cc_accessible":true,"flags":[],"whiteboard":"","see_also":[],"resolution":"FIXED","platform":"x86","cf_fx_points":"---","cf_fx_iteration":"---","id":531,"assigned_to":"ramiro@eazel.com","cc":["mcafee@gmail.com"],"summary":"Allow config directories different from ~/.netscape/","severity":"enhancement","creator":"mozilla-bugs@nogin.org","product":"MozillaClassic","depends_on":[],"is_open":false,"blocks":[],"is_confirmed":true,"cf_qa_whiteboard":"","groups":[],"assigned_to_detail":{"name":"ramiro@eazel.com","real_name":"Ramiro Estrugo","id":602,"email":"ramiro@eazel.com"},"creator_detail":{"name":"mozilla-bugs@nogin.org","real_name":"Aleksey Nogin","id":1069,"email":"mozilla-bugs@nogin.org"},"priority":"P3","classification":"Graveyard","cf_last_resolved":"Wed Aug 27 23:13:13 EEST 2003","version":"1998-07-28","url":"ftp://ftp.cs.cornell.edu/pub/nogin/mozilla/","qa_contact":"gerardok@formerly-netscape.com.tld","op_sys":"Linux","last_change_time":"Wed Aug 27 23:17:14 EEST 2003","target_milestone":"---","component":"XFE","is_creator_accessible":true,"cc_detail":[{"name":"mcafee@gmail.com","real_name":"Chris McAfee","id":1672,"email":"mcafee@gmail.com"}],"mentors":[],"mentors_detail":[],"cf_user_story":"","qa_contact_detail":{"name":"gerardok@formerly-netscape.com.tld","real_name":"","id":4015,"email":"gerardok@formerly-netscape.com.tld"},"status":"VERIFIED"}],"comments":[{"is_private":false,"creation_time":"Mon Aug 17 02:12:23 EEST 1998","creator":"mozilla-bugs@nogin.org","author":"mozilla-bugs@nogin.org","time":"Mon Aug 17 02:12:23 EEST 1998","text":"Created by Aleksey Nogin (ayn2@cornell.edu) on Sunday, August 16, 1998 12:12:23 PM PDT Additional Details : Currently Mozilla still uses ~/.netscape/ directory for its config files, although ~/.mozilla/ may seem more appropriate. Authors of different \"brands\" of Mozilla may want to have their programs to use separate directories and users may also want to use different versions of Mozilla with different config files.  I wrote a patch (it is derived from the patch by Dan McGuirk <djm@indirect.com>) that adds a new run-time option -configdir <directory> that allows to specify a config subdirectory different from \".netscape\" and also allows to change the compiled in default by changing one line of the ocode instead of hunting for all these hardcoded strings through all the sources.  I am trying to keep the patch up-to-date with the current CVS sources and you should always be able to find them (divided into files according to modules) at ftp://ftp.cs.cornell.edu/pub/nogin/mozilla/","id":1491,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Thu Aug 27 17:29:59 EEST 1998","creator":"mozilla-bugs@nogin.org","author":"mozilla-bugs@nogin.org","time":"Thu Aug 27 17:29:59 EEST 1998","text":"*** Bug 464 has been marked as a duplicate of this bug. ***","id":1492,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Sun Aug 30 10:40:59 EEST 1998","creator":"mcafee@gmail.com","author":"mcafee@gmail.com","time":"Sun Aug 30 10:40:59 EEST 1998","text":"Ramiro was all over this, was going to check it in, and then some shit hit the fan at work and ? we need to get the patch again.  Can you mail me a current version and I will try to check this in.","id":1493,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Mon Aug 31 15:01:59 EEST 1998","creator":"ramiro@formerly-netscape.com.tld","author":"ramiro@formerly-netscape.com.tld","time":"Mon Aug 31 15:01:59 EEST 1998","text":"Reassigning to myself.  I have the patch applied and ready to check in, however i have a few issues.  I found some problems.  For example, there was 'buf' variable that was not being initialized and causing asserts in xp_file.c  Also, you rearranged a bunch of code.  You moved the XtInitialize code around. You also changed where fe_InitializeGlobalResources() is called.  There is also a problem when you give -config-dir a bogus directory or one that does not exist: mozilla-export -config-dir ~/foo is bad and we crash.  There is also no documentation for -config-dir for --help.  All of this hackery has got me thinking.  We need a better solution for this stuff.  The changes you made are a good start.  Unfortunately, there already are so many config_dir global variables and other stuff in the xfe that confuses things.  What I would like to have is a UnixFEConfig library which would contain all the functions associated with config dir and other.  Im not sure if you are interested in working on such a library.  It would be very useful - it could be used by the qt and gtk front ends as well.  Here is what I would like to see:  + All global/static  'config_dir' variables gone.  + No config dir stuff in fe_GlobalData.  Adding stuff to global data is bad.  We should use the PREF_ api directly.  + The environment is only checked once.  In your current code you do getenv(\"HOME\") everytime fe_GetConfigDir() is called.  We should do this only once and store the results in a static variable.  + More robust code.  For example if you give a bogus option to -config-dir, it posts an FE_Alert() with an appropiate blurb.","id":1494,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Wed Sep 02 14:34:59 EEST 1998","creator":"ramiro@formerly-netscape.com.tld","author":"ramiro@formerly-netscape.com.tld","time":"Wed Sep 02 14:34:59 EEST 1998","text":"Ok, i checked in the patches!  Finally.  Im really sorry that it took so long. There really is no good excuse.  I can give you some lame ones, but the truth is I should have checked this code in as soon as you posted it.  Anyway...  I fixed the buf problem.  There was a buf somewhere in there that was not being initialized and causing assert problems (and other random problems, probably).  Ignore the fe_GlobalData comments above...I was tired when I wrote them and they have nothing to do with your code.  I was confused with an unrelated prefs thing.  I renamed the -configDir flag to -config-dir to be consistent with other flags.  I still think it would be a interesting project to move all this config dir stuff to a nice happy library.  Again, thanks for your help and patience.  Marking fixed.","id":1495,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Fri Feb 05 16:35:59 EET 1999","creator":"glynn@formerly-netscape.com.tld","author":"glynn@formerly-netscape.com.tld","time":"Fri Feb 05 16:35:59 EET 1999","text":"qa contact set to gerardok@netscape.com for review against current code base","id":1496,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Thu Mar 25 02:03:59 EET 1999","creator":"gerardok@formerly-netscape.com.tld","author":"gerardok@formerly-netscape.com.tld","time":"Thu Mar 25 02:03:59 EET 1999","text":"I tried using the config-dir parameter with the apprunner on linux, but I couldn't make it work. On Feb 24th, asked developer to confirm if this code has been carried over to the new code base, but haven't got any answer yet.  I suspect it's not applicable in the new code base. Status changed to Closed.","id":1497,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Wed Aug 27 23:06:40 EEST 2003","creator":"bugzilla@babylonsounds.com","author":"bugzilla@babylonsounds.com","time":"Wed Aug 27 23:06:40 EEST 2003","text":"Status CLOSED is deprecated as per bug 169885","id":1944707,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Wed Aug 27 23:08:00 EEST 2003","creator":"bugzilla@babylonsounds.com","author":"bugzilla@babylonsounds.com","time":"Wed Aug 27 23:08:00 EEST 2003","text":"Status CLOSED is deprecated as per bug 169885","id":1944709,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Wed Aug 27 23:13:13 EEST 2003","creator":"bugzilla@babylonsounds.com","author":"bugzilla@babylonsounds.com","time":"Wed Aug 27 23:13:13 EEST 2003","text":"Re-resolving","id":1944726,"bug_id":531,"tags":[]},{"is_private":false,"creation_time":"Wed Aug 27 23:17:14 EEST 2003","creator":"bugzilla@babylonsounds.com","author":"bugzilla@babylonsounds.com","time":"Wed Aug 27 23:17:14 EEST 2003","text":"verifying former CLOSED bugs","id":1944733,"bug_id":531,"tags":[]}]}
