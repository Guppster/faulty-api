{"bugs":[{"creation_time":"Mon Aug 10 14:00:00 EEST 1998","keywords":[],"see_also":[],"resolution":"FIXED","cf_blocking_fx":"---","cf_fx_iteration":"---","cf_blocking_b2g":"---","cf_status_b2g_1_4":"---","id":652,"is_open":false,"cf_qa_whiteboard":"","assigned_to_detail":{"name":"buster@formerly-netscape.com.tld","real_name":"","id":3829,"email":"buster@formerly-netscape.com.tld"},"creator_detail":{"name":"angus@formerly-netscape.com.tld","real_name":"Angus Davis","id":70,"email":"angus@formerly-netscape.com.tld"},"cf_status_firefox37":"---","priority":"P2","cf_status_firefox36":"---","classification":"Components","cf_status_firefox35":"---","version":"Trunk","cf_status_firefox34":"---","op_sys":"Windows NT","last_change_time":"Wed Mar 08 22:35:57 EET 2000","cf_crash_signature":"","mentors_detail":[],"cf_tracking_b2g":"---","qa_contact_detail":{"name":"elig@formerly-netscape.com.tld","real_name":"Eli Goldberg","id":1698,"email":"elig@formerly-netscape.com.tld"},"cf_status_b2g_2_0m":"---","status":"VERIFIED","cf_feature_b2g":"---","is_cc_accessible":true,"cf_tracking_firefox37":"---","cf_tracking_firefox36":"---","cf_tracking_relnote_b2g":"---","flags":[],"cf_status_firefox_esr31":"---","whiteboard":"Narrowed down to nsImageFrame::HandleEvent","platform":"x86","cf_tracking_firefox_esr31":"---","cf_blocking_fennec":"---","cf_fx_points":"---","cf_tracking_firefox35":"---","cf_tracking_firefox34":"---","cf_status_b2g_2_2":"---","cf_status_b2g_2_1":"---","cf_status_b2g_2_0":"---","assigned_to":"buster@formerly-netscape.com.tld","summary":"Server Side Image Maps Do Not Work","cf_tracking_e10s":"---","cc":["buster@formerly-netscape.com.tld","elig@formerly-netscape.com.tld","joki@formerly-netscape.com.tld","michaelp@formerly-netscape.com.tld","troy@formerly-netscape.com.tld"],"severity":"normal","creator":"angus@formerly-netscape.com.tld","product":"Core","depends_on":[],"cf_tracking_firefox_relnote":"---","blocks":[],"is_confirmed":true,"groups":[],"cf_last_resolved":"Thu Jul 08 19:39:44 EEST 1999","url":"http://spyglass1.sjmercury.com/classifieds/real/today/homerent.htm","qa_contact":"elig@formerly-netscape.com.tld","target_milestone":"M8","component":"HTML: Form Submission","is_creator_accessible":true,"cc_detail":[{"name":"buster@formerly-netscape.com.tld","real_name":"","id":3829,"email":"buster@formerly-netscape.com.tld"},{"name":"elig@formerly-netscape.com.tld","real_name":"Eli Goldberg","id":1698,"email":"elig@formerly-netscape.com.tld"},{"name":"joki@formerly-netscape.com.tld","real_name":"joki (gone)","id":3827,"email":"joki@formerly-netscape.com.tld"},{"name":"michaelp@formerly-netscape.com.tld","real_name":"","id":3820,"email":"michaelp@formerly-netscape.com.tld"},{"name":"troy@formerly-netscape.com.tld","real_name":"","id":3825,"email":"troy@formerly-netscape.com.tld"}],"mentors":[],"cf_user_story":""}],"comments":[{"is_private":false,"creation_time":"Mon Aug 10 14:00:00 EEST 1998","creator":"angus@formerly-netscape.com.tld","author":"angus@formerly-netscape.com.tld","time":"Mon Aug 10 14:00:00 EEST 1998","text":"Visit this URL for a sample server-side image map (it's a map of the south bay area) that does not work in NGLayout, but works in Navigator.","id":2118,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Fri Sep 11 08:24:59 EEST 1998","creator":"jevering@formerly-netscape.com.tld","author":"jevering@formerly-netscape.com.tld","time":"Fri Sep 11 08:24:59 EEST 1998","text":"Vidur, do you know who would be responsible for this?","id":2119,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Fri Sep 11 08:37:59 EEST 1998","creator":"angus@formerly-netscape.com.tld","author":"angus@formerly-netscape.com.tld","time":"Fri Sep 11 08:37:59 EEST 1998","text":"Adding back in the URL field. Apparently all the URLs were trashed in the migration fron bugsplat to bugzilla.","id":2120,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Fri Sep 11 19:18:59 EEST 1998","creator":"vidur@formerly-netscape.com.tld","author":"vidur@formerly-netscape.com.tld","time":"Fri Sep 11 19:18:59 EEST 1998","text":"I don't know who's responsible. I believe Kipp did client-side image maps. I suspect Tom Pixley might be interested since it involves some event processing. Sparky should be involved, just because I know it will annoy him. Could one of you guys take this bug.","id":2121,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Mon Sep 21 03:01:59 EEST 1998","creator":"angus@formerly-netscape.com.tld","author":"angus@formerly-netscape.com.tld","time":"Mon Sep 21 03:01:59 EEST 1998","text":"Adding the victims Vidur mentioned to the CC list in hopes one of them will pick up this bug, and changing component field to \"Form Submission\" for lack of a better component.","id":2122,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Sun Nov 08 04:25:59 EET 1998","creator":"angus@formerly-netscape.com.tld","author":"angus@formerly-netscape.com.tld","time":"Sun Nov 08 04:25:59 EET 1998","text":"Reassigning to Chris since this seems like a forms thing, and since no one else has been able to take a look at this, maybe Chris can.","id":2123,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Wed Feb 03 16:08:59 EET 1999","creator":"leger@formerly-netscape.com.tld","author":"leger@formerly-netscape.com.tld","time":"Wed Feb 03 16:08:59 EET 1999","text":"Setting all current Open/Normal to M4.","id":2124,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Sat Mar 06 06:14:59 EET 1999","creator":"paulmac@formerly-netscape.com.tld","author":"paulmac@formerly-netscape.com.tld","time":"Sat Mar 06 06:14:59 EET 1999","text":"per leger, assigning QA contacts to all open bugs without QA contacts according to list at http://bugzilla.mozilla.org/describecomponents.cgi?product=Browser","id":2125,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Mon Mar 08 01:05:59 EET 1999","creator":"christinehoff4@aol.com","author":"christinehoff4@aol.com","time":"Mon Mar 08 01:05:59 EET 1999","text":"Although component says 'Form Submission' looks like an imagemap problem. Reassigning qa contact to elig@netscape.com","id":2126,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Thu Mar 25 18:14:59 EET 1999","creator":"karnaze@formerly-netscape.com.tld","author":"karnaze@formerly-netscape.com.tld","time":"Thu Mar 25 18:14:59 EET 1999","text":"*** Bug 4034 has been marked as a duplicate of this bug. ***","id":2127,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Thu Mar 25 18:15:59 EET 1999","creator":"karnaze@formerly-netscape.com.tld","author":"karnaze@formerly-netscape.com.tld","time":"Thu Mar 25 18:15:59 EET 1999","text":"bug 4034 was marked as a duplicate of this and here are its comments.  At the Apple Store page, click on an item (say, the iMac) to get more info on it. I'm guessing that expected behavior is to send the screen coordinates directly to the server (by appending them to the URL specified in ths link). Instead, however, all that happens is that the image itself is displayed in the browser and the link is not followed.  The following HTML snippet may be of use:  <A href=\"http://store2.apple.com/1-800-795-1000/WebObjects/AppleStore.woa/256775609 0968574907028295232613155/CoverPage.wo/44151854015155/2.1.3.0.0.0/1/order7.apple .com?57,91\"><IMG height=\"166\" vspace=\"0\" alt=\"Special\" width=\"180\" border=\"0\" align=\"middle\" ismap src=\"menuspecialpbg3.jpg\"><\/A>  Clicking on this link doesn't follow the link, but instead displays the image source in the browser. If you remove the 'ismap' from the link, it works as expected. This HTML does work in Nav 4.51 and IE 4.01.","id":2128,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Tue Apr 06 23:25:59 EEST 1999","creator":"pollmann@formerly-netscape.com.tld","author":"pollmann@formerly-netscape.com.tld","time":"Tue Apr 06 23:25:59 EEST 1999","text":"Marking M5","id":2129,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Fri Apr 16 18:28:59 EEST 1999","creator":"elig@formerly-netscape.com.tld","author":"elig@formerly-netscape.com.tld","time":"Fri Apr 16 18:28:59 EEST 1999","text":"*** Bug 3951 has been marked as a duplicate of this bug. ***","id":2130,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Mon May 10 19:08:59 EEST 1999","creator":"3jrgm@qlink.queensu.ca","author":"3jrgm@qlink.queensu.ca","time":"Mon May 10 19:08:59 EEST 1999","text":"*** Bug 6138 has been marked as a duplicate of this bug. ***","id":2131,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Tue May 11 18:14:59 EEST 1999","creator":"cpratt@formerly-netscape.com.tld","author":"cpratt@formerly-netscape.com.tld","time":"Tue May 11 18:14:59 EEST 1999","text":"*** Bug 5113 has been marked as a duplicate of this bug. ***","id":2132,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Fri May 14 21:52:59 EEST 1999","creator":"pollmann@formerly-netscape.com.tld","author":"pollmann@formerly-netscape.com.tld","time":"Fri May 14 21:52:59 EEST 1999","text":"Redistributing to M8...","id":2133,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Tue Jun 08 17:02:59 EEST 1999","creator":"elig@formerly-netscape.com.tld","author":"elig@formerly-netscape.com.tld","time":"Tue Jun 08 17:02:59 EEST 1999","text":"*** Bug 7738 has been marked as a duplicate of this bug. ***","id":2134,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Sat Jun 12 01:16:59 EEST 1999","creator":"pollmann@formerly-netscape.com.tld","author":"pollmann@formerly-netscape.com.tld","attachment_id":387,"time":"Sat Jun 12 01:16:59 EEST 1999","text":"Created attachment 387 Test case","id":2135,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Sat Jun 12 01:18:59 EEST 1999","creator":"pollmann@formerly-netscape.com.tld","author":"pollmann@formerly-netscape.com.tld","attachment_id":388,"time":"Sat Jun 12 01:18:59 EEST 1999","text":"Created attachment 388 Um...  Test Case","id":2136,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Sat Jun 12 01:30:59 EEST 1999","creator":"pollmann@formerly-netscape.com.tld","author":"pollmann@formerly-netscape.com.tld","time":"Sat Jun 12 01:30:59 EEST 1999","text":"The offending code seems to be in (or very very near):  mozilla/layout/html/base/src/nsImageFrame.cpp::HandleEvent          nsIURL* docURL = nsnull;         nsIDocument* doc = nsnull;         mContent->GetDocument(doc);         if (nsnull != doc) {           docURL = doc->GetDocumentURL();           NS_RELEASE(doc);         }          NS_ASSERTION(nsnull != docURL, \"nsIDocument->GetDocumentURL() returning nsnull\");         PRBool inside = PR_FALSE;         if (nsnull != docURL) {            inside = map->IsInside(x, y, docURL, absURL, target, altText,                                         &suppress);         }         NS_IF_RELEASE(docURL);         if (inside) {           // We hit a clickable area. Time to go somewhere...           PRBool clicked = PR_FALSE;           if (aEvent->message == NS_MOUSE_LEFT_BUTTON_UP) {             aEventStatus = nsEventStatus_eConsumeDoDefault;             clicked = PR_TRUE;           }           TriggerLink(aPresContext, absURL, target, clicked);         }  This is the stuff that handles Server Side image maps like this one.","id":2137,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Fri Jun 18 21:56:59 EEST 1999","creator":"3jrgm@qlink.queensu.ca","author":"3jrgm@qlink.queensu.ca","time":"Fri Jun 18 21:56:59 EEST 1999","text":"*** Bug 8498 has been marked as a duplicate of this bug. ***","id":2138,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Fri Jun 18 21:59:59 EEST 1999","creator":"3jrgm@qlink.queensu.ca","author":"3jrgm@qlink.queensu.ca","time":"Fri Jun 18 21:59:59 EEST 1999","text":"*** Bug 8498 has been marked as a duplicate of this bug. ***","id":2139,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Fri Jun 18 22:47:59 EEST 1999","creator":"3jrgm@qlink.queensu.ca","author":"3jrgm@qlink.queensu.ca","time":"Fri Jun 18 22:47:59 EEST 1999","text":"*** Bug 8498 has been marked as a duplicate of this bug. ***","id":2140,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Tue Jun 22 23:57:59 EEST 1999","creator":"pollmann@formerly-netscape.com.tld","author":"pollmann@formerly-netscape.com.tld","time":"Tue Jun 22 23:57:59 EEST 1999","text":"If I had no fear of breaking image maps, I would hack in code to get the containing <A>'s HREF in this case instead of using the nsImageFrames's mContent's BaseURL.  As it is though, well... I just don't know how horribly this might break things.  Who should this bug should go to?  Hmm, lxr tells me Peter originally wrote the offending \"htmlContent->GetBaseURL\" just a few lines below what I quoted earlier, so I'm giving it to him.  (I guess I felt too guilty to pass the buck at that time, but now I have more bugs then even Peter, so there.  ;)  )","id":2141,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Wed Jul 07 03:08:59 EEST 1999","creator":"peterl-retired@formerly-netscape.com.tld","author":"peterl-retired@formerly-netscape.com.tld","time":"Wed Jul 07 03:08:59 EEST 1999","text":"Apparently the issue isn't really related to GetBaseURL (which is a cover for <BASE> tag compatibility glue), but a deficiency in the image map code not taking into account hrefs from enclosing <A> tags. Kipp any insight?","id":2142,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Thu Jul 08 19:39:59 EEST 1999","creator":"kipp@formerly-netscape.com.tld","author":"kipp@formerly-netscape.com.tld","time":"Thu Jul 08 19:39:59 EEST 1999","text":"There were two bugs (1) the coordinates for server side image maps were not bein properly computed (2) the wrong url was being computed. Now, what is done is that the image code looks upward in the content tree for an html anchor element and if it finds one, uses the href attribute from there.","id":2143,"bug_id":652,"tags":[]},{"is_private":false,"creation_time":"Wed Jul 14 18:12:59 EEST 1999","creator":"elig@formerly-netscape.com.tld","author":"elig@formerly-netscape.com.tld","time":"Wed Jul 14 18:12:59 EEST 1999","text":"Verified fixed in 7.13.99 AM builds (via img_ismap HTML test case), on Win NT 4.0SP3, Mac OS 8.6, and Linux.","id":2144,"bug_id":652,"tags":[]}]}
